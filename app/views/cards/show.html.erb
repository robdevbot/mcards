<% if !@card %>
    <p>card not found!</p>
<% else %>

    <%= image_tag @card.imgsrc %>

    <h3><%= @card.name %></h3>
    <h4>Artist: <%= @card.artist %></h4>
    <p><%= image_tag @mana_img %></p>
    <p>$<%= number_with_precision(@price, :precision => 2) %></p>
    

    <%= form_tag("/checkout", method: "post", id: "checkout") do %>
      <div id="payment-form"></div>
      <input type="hidden" name="price" value="<%= @price %>">
      <input type="submit" value="Pay $<%= number_with_precision(@price, :precision => 2) %>">
    <% end %>

    <script src="https://js.braintreegateway.com/js/braintree-2.29.0.min.js"></script>
    <script>
    // We generated a client token for you so you can test out this code
    // immediately. In a production-ready integration, you will need to
    // generate a client token on your server (see section below).
    var clientToken = "<%= @token %>";
    
    braintree.setup(clientToken, "dropin", {
      container: "payment-form"
    });
    </script>

<% end %>